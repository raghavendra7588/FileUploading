<h3 class="mt-3" style="text-align: center;color:blue;">Purchase Order Component</h3>
<div class="container mt-3 mb-2">
    <div class="row">

        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-select id="vendor_List" placeholder="Vendor List" [(ngModel)]="purchaseOrder.vendor">
                    <mat-option *ngFor="let item of vendorData;" [value]="item.vendorId"
                        (click)="selectedVendorFromList(item)">
                        {{item.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput placeholder="GST Number" name="gstType" [(ngModel)]="purchaseOrder.gstNumber"
                    disabled />
            </mat-form-field>
        </div>


        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput placeholder="Email" name="email" autocomplete="off" [(ngModel)]="purchaseOrder.email"
                    disabled />
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput placeholder="Batch Number" name="batchNo" [(ngModel)]="purchaseOrder.BatchNumber" />
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput placeholder="Order No" name="orderNo" [(ngModel)]="purchaseOrder.orderNo" disabled />
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-label>Order Date</mat-label>
                <input matInput [matDatepicker]="picker1" [(ngModel)]="purchaseOrder.orderDate" placeholder="From Date"
                    disabled>
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>

        </div>
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-label>Delivery Date</mat-label>
                <input matInput [matDatepicker]="picker" [(ngModel)]="purchaseOrder.deliveryDate" [min]="minDate"
                    autocomplete="off">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>

        <div class="col-md-3">

            <mat-form-field class="full-width-field" style="width: 230px !important;">
                <input matInput placeholder="Reference No" name="referenceNo" [(ngModel)]="purchaseOrder.referenceNo" />
            </mat-form-field>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-label>Payment Term</mat-label>
                <mat-select [(ngModel)]="purchaseOrder.paymentTerms">
                    <mat-option *ngFor="let term of paymentTerm" [value]="term.title">
                        {{ term.title }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- {{purchaseOrder.paymentTerms}} -->
        <div class="col-md-3">
            <!-- <mat-form-field>
                <input matInput placeholder="Credit Limit/Per Order" name="creditLimitPerOrder" [(ngModel)]="CreditLimitPerOrder" disabled />
            </mat-form-field> -->
            <p class="font-weight-bold mt-4">Credit Limit/Per Order : {{CreditLimitPerOrder | number : '1.2-2'}}</p>
        </div>
    </div>

</div>
<mat-divider></mat-divider>


<div class="container mt-2">
    <h3 class="font-weight-bold">Billing Address</h3>
    <div class="row mt-1">
        <div class="col-md-3 mt-3">

            <mat-form-field style="width: 230px !important;">
                <mat-select id="address_list" placeholder="Address List" [(ngModel)]="purchaseOrder.billingNameList">
                    <mat-option *ngFor="let address of addressData;" [value]="address.id"
                        (click)="selectedBillingAddress(address)">
                        {{address.billingName}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-label>Address</mat-label>
                <textarea id="billingAddress" matInput [(ngModel)]="purchaseOrder.billingAddress"></textarea>
            </mat-form-field>
        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.billingCity" placeholder="City" name="billingCity" />
            </mat-form-field>
        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.billingPhone" placeholder="Phone" name="billingPhone" />
            </mat-form-field>
        </div>
    </div>
</div>

<div class="container">
    <h3 class="font-weight-bold">Shipping Address</h3>
    <div class="row">

        <div class="col-md-3 mt-3">

            <mat-form-field style="width: 230px !important;">
                <mat-select id="address_list" placeholder="Address List" [(ngModel)]="purchaseOrder.shippingNameList">
                    <mat-option *ngFor="let address of addressData;" [value]="address.id"
                        (click)="selectedShippingAddress(address)">
                        {{address.shippingName}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-label>Address</mat-label>
                <textarea id="shippingAddress" matInput [(ngModel)]="purchaseOrder.shippingAddress"></textarea>
            </mat-form-field>

        </div>

        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.shippingCity" placeholder="Shipping City"
                    name="shippingCity" />
            </mat-form-field>

        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.shippingPhone" placeholder="Shipping Phone"
                    name="shippingPhone" />
            </mat-form-field>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <button mat-raised-button (click)="openDialog()">Go to Price List</button>
    </div>
</div>

<mat-divider></mat-divider>

<div class="container my-3">
    <div class="row">
        <div class="col-md-12">


            <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">


                <ng-container matColumnDef="ProductId">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Product Id </th>
                    <td mat-cell *matCellDef="let element"> {{element.productId}} </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>


                <ng-container matColumnDef="BrandName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Brand Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.BrandName}} </td>
                    <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>


                <ng-container matColumnDef="ProductName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Product Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.Name}} </td>
                    <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="Quantity">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Varient </th>
                    <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
                    <td mat-footer-cell *matFooterCellDef> Total</td>
                </ng-container>

                <ng-container matColumnDef="AvailableQuantity">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Purchase Quantity</th>
                    <td mat-cell *matCellDef="let element">
                        <mat-form-field floatLabel="never" class="availabelQuantityInput">
                            <input matInput placeholder="Quantity" [(ngModel)]="element.availableQuantity"
                                (focusout)="editQuantity(element)">
                        </mat-form-field>
                    </td>
                    <td mat-footer-cell *matFooterCellDef> {{getTotalQuantity() }} </td>
                </ng-container>

                <ng-container matColumnDef="BuyingPrice">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Buying Price </th>
                    <td mat-cell *matCellDef="let element"> {{element.buyingPrice  | number : '1.2-2'}} </td>
                    <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="Discount">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Discount </th>
                    <td mat-cell *matCellDef="let element"> {{element.discount  | number : '1.2-2'}} </td>
                    <td mat-footer-cell *matFooterCellDef>{{getTotalDiscount() | number : '1.2-2'}} </td>
                </ng-container>

                <ng-container matColumnDef="FinalPrice">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Final Price </th>
                    <td mat-cell *matCellDef="let element"> {{element.finalPrice  | number : '1.2-2'}} </td>
                    <td mat-footer-cell *matFooterCellDef>{{getFinalPrice() | number : '1.2-2'}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[7,20,100]" showFirstLastButtons></mat-paginator>
        </div>
    </div>

</div>

<mat-divider></mat-divider>

<div class="container my-3">
    <div class="row">
        <div class="col-md-7"></div>
        <div class="col-md-5">
            <p class="font-weight-bold text-center" style="font-size: 19px;">Total Payable Amount :
                {{grandTotal | number : '1.2-2'}}            
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <mat-label>Remarks</mat-label>
                <textarea id="remarks" matInput [(ngModel)]="purchaseOrder.remarks"></textarea>
            </mat-form-field>
        </div>

        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.itemValue" placeholder="total Item" name="itemValue"
                    disabled />
            </mat-form-field>
        </div>

        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.taxAmount" placeholder="Tax amount" name="taxAmount" />
            </mat-form-field>
        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.taxable" placeholder="Taxable" name="taxAble" />
            </mat-form-field>
        </div>
    </div>

    <div class="row">

        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.cessAmount" placeholder="CESS Amount" name="cessAmount" />
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.docAmount" placeholder="DOC Amount" name="docAmount" />
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.advanceAmount" placeholder="Advance Amount"
                    name="advanceAmount" />
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field style="width: 230px !important;">
                <input matInput [(ngModel)]="purchaseOrder.advanceLedger" placeholder="Advance Ledger"
                    name="advanceLedger" />
            </mat-form-field>
        </div>
    </div>
</div>

<div class="container my-3">
    <div class="row">
        <div class="col-md-4">
            <button mat-raised-button color="primary" (click)="savePurchaseOrder()">Place Order</button>
            <button mat-raised-button class="ml-4" color="warn" (click)="clearValues()">Cancel</button>
        </div>
    </div>
</div>