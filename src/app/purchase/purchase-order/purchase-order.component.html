<h3 class="mt-3" style="text-align: center;color:blue;">Purchase Order Component</h3>

<div class="container mt-3 mb-2">
    <div class="row">

        <div class="col-md-3">
            <mat-form-field>
                <mat-select id="vendor_List" placeholder="Vendor List" [(ngModel)]="purchaseOrder.vendor">
                    <mat-option *ngFor="let item of vendorData;" [value]="item.vendorId"
                        (click)="selectedVendorFromList(item)">
                        {{item.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field>
                <input matInput placeholder="GST Type" name="gstType" [(ngModel)]="purchaseOrder.gstType" />
            </mat-form-field>
        </div>


        <div class="col-md-3">
            <mat-form-field>
                <input matInput placeholder="Email" name="email" autocomplete="off" [(ngModel)]="purchaseOrder.email" />
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field>
                <input matInput placeholder="Agent" name="agent" [(ngModel)]="purchaseOrder.agent" />
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <mat-form-field>
                <input matInput placeholder="Order No" name="orderNo" [(ngModel)]="purchaseOrder.orderNo" />
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field>
                <mat-label>Order Date</mat-label>
                <input matInput [matDatepicker]="picker1" [(ngModel)]="purchaseOrder.orderDate" placeholder="From Date"
                    disabled>
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>

        </div>
        <div class="col-md-3">
            <mat-form-field>
                <mat-label>Delivery Date</mat-label>
                <input matInput [matDatepicker]="picker" [(ngModel)]="purchaseOrder.deliveryDate" [min]="minDate"
                    autocomplete="off">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </div>

        <div class="col-md-3">

            <mat-form-field class="full-width-field">
                <input matInput placeholder="Reference No" name="referenceNo" [(ngModel)]="purchaseOrder.referenceNo" />
            </mat-form-field>
        </div>
    </div>

</div>
<mat-divider></mat-divider>


<div class="container mt-2">
    <h3 class="font-weight-bold">Billing Address</h3>
    <div class="row mt-1">
        <div class="col-md-3 mt-3">

            <mat-form-field>
                <mat-select id="address_list" placeholder="Address List" [(ngModel)]="purchaseOrder.billingNameList">
                    <mat-option *ngFor="let address of addressData;" [value]="address.id"
                        (click)="selectedBillingAddress(address)">
                        {{address.billingName}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field>
                <mat-label>Address</mat-label>
                <textarea matInput [(ngModel)]="purchaseOrder.billingAddress"
                    placeholder="Ex. It makes me feel..."></textarea>
            </mat-form-field>
        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.billingCity" placeholder="City" name="billingCity" />
            </mat-form-field>
        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.billingPhone" placeholder="Phone" name="billingPhone" />
            </mat-form-field>
        </div>
    </div>
</div>

<div class="container">
    <h3 class="font-weight-bold">Shipping Address</h3>
    <div class="row">

        <div class="col-md-3 mt-3">

            <mat-form-field>
                <mat-select id="address_list" placeholder="Address List" [(ngModel)]="purchaseOrder.shippingNameList">
                    <mat-option *ngFor="let address of addressData;" [value]="address.id"
                        (click)="selectedShippingAddress(address)">
                        {{address.shippingName}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field>
                <mat-label>Address</mat-label>
                <textarea matInput [(ngModel)]="purchaseOrder.shippingAddress"
                    placeholder="Ex. It makes me feel..."></textarea>
            </mat-form-field>

        </div>

        <div class="col-md-3 mt-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.shippingCity" placeholder="Shipping City"
                    name="shippingCity" />
            </mat-form-field>

        </div>
        <div class="col-md-3 mt-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.shippingPhone" placeholder="Shipping Phone"
                    name="shippingPhone" />
            </mat-form-field>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <button mat-raised-button (click)="openDialog()">Go to Price List</button>
    </div>
</div>

<mat-divider></mat-divider>

<div class="container my-3">
    <div class="row">

        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">


            <ng-container matColumnDef="productId">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> productId. </th>
                <td mat-cell *matCellDef="let element"> {{element.productId}} </td>
            </ng-container>


            <ng-container matColumnDef="brandName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> brandName </th>
                <td mat-cell *matCellDef="let element"> {{element.BrandName}} </td>
            </ng-container>


            <ng-container matColumnDef="productName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> productName </th>
                <td mat-cell *matCellDef="let element"> {{element.Name}} </td>
            </ng-container>

            <ng-container matColumnDef="quantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> quantity </th>
                <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
            </ng-container>

            <ng-container matColumnDef="buyingPrice">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> buyingPrice </th>
                <td mat-cell *matCellDef="let element"> {{element.buyingPrice}} </td>
            </ng-container>

            <ng-container matColumnDef="discount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> discount </th>
                <td mat-cell *matCellDef="let element"> {{element.discount}} </td>
            </ng-container>

            <ng-container matColumnDef="availableQuantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Purchase Quantity </th>
                <td mat-cell *matCellDef="let element"> {{element.availableQuantity}} </td>
            </ng-container>

            <ng-container matColumnDef="finalPrice">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> finalPrice </th>
                <td mat-cell *matCellDef="let element"> {{element.finalPrice}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

    </div>
  
</div>

<mat-divider></mat-divider>

<div class="container my-3">
    <div class="row">
        <div class="col-md-9"></div>
        <div class="col-md-3">
            <mat-form-field>
              <mat-label>Grand total</mat-label>
              <input matInput [(ngModel)]="grandTotal" disabled>
            </mat-form-field>
          </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <mat-form-field>
                <mat-label>Remarks</mat-label>
                <textarea matInput [(ngModel)]="purchaseOrder.remarks" placeholder="Ex. It makes me feel..."></textarea>
            </mat-form-field>
        </div>

        <div class="col-md-3 mt-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.itemValue" placeholder="Item Value" name="itemValue" />
            </mat-form-field>
        </div>

        <div class="col-md-3 mt-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.taxAmount" placeholder="Tax amount" name="taxAmount" />
            </mat-form-field>
        </div>
        <div class="col-md-3 mt-3 ">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.taxable" placeholder="Taxable" name="taxAble" />
            </mat-form-field>
        </div>
    </div>

    <div class="row">

        <div class="col-md-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.cessAmount" placeholder="CESS Amount" name="cessAmount" />
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.docAmount" placeholder="DOC Amount" name="docAmount" />
            </mat-form-field>
        </div>

        <div class="col-md-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.advanceAmount" placeholder="Advance Amount"
                    name="advanceAmount" />
            </mat-form-field>
        </div>
        <div class="col-md-3">
            <mat-form-field>
                <input matInput [(ngModel)]="purchaseOrder.advanceLedger" placeholder="Advance Ledger"
                    name="advanceLedger" />
            </mat-form-field>
        </div>
    </div>
</div>

<div class="container my-3">
    <div class="row">
        <div class="col-md-1">
            <button mat-raised-button color="primary" (click)="savePurchaseOrder()">Save</button>
        </div>
    </div>
</div>